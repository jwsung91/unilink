<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>unilink: Test Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">unilink
   &#160;<span id="projectnumber">0.3.1</span>
   </div>
   <div id="projectbrief">A simple C++ library for unified async communication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_test_structure.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Test Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes the organized test structure of the <code>unilink</code> library.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md810"></a>
Overview</h1>
<p>Tests are organized into <b>4 main categories</b>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Category   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Speed   </th><th class="markdownTableHeadNone">Test Count   </th><th class="markdownTableHeadNone">Labels    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Unit</b>   </td><td class="markdownTableBodyNone">Isolated component tests   </td><td class="markdownTableBodyNone">Fast (~10s)   </td><td class="markdownTableBodyNone">97   </td><td class="markdownTableBodyNone"><code>unit</code>, <code>fast</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Integration</b>   </td><td class="markdownTableBodyNone">Component interaction tests   </td><td class="markdownTableBodyNone">Medium (~75s)   </td><td class="markdownTableBodyNone">118   </td><td class="markdownTableBodyNone"><code>integration</code>, <code>medium</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>E2E</b>   </td><td class="markdownTableBodyNone">End-to-end scenarios   </td><td class="markdownTableBodyNone">Slow (~64s)   </td><td class="markdownTableBodyNone">22   </td><td class="markdownTableBodyNone"><code>e2e</code>, <code>slow</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Performance</b>   </td><td class="markdownTableBodyNone">Benchmarks and profiling   </td><td class="markdownTableBodyNone">Optional (~10s)   </td><td class="markdownTableBodyNone">58   </td><td class="markdownTableBodyNone"><code>performance</code>, <code>optional</code>   </td></tr>
</table>
<p><b>Total</b>: 295 tests (~160 seconds full suite)</p>
<hr  />
<h1><a class="anchor" id="autotoc_md812"></a>
Directory Structure</h1>
<div class="fragment"><div class="line">test/</div>
<div class="line">â”œâ”€â”€ unit/                       # Fast unit tests</div>
<div class="line">â”‚   â”œâ”€â”€ common/                 # Common utilities tests</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_core.cc</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_memory.cc</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_boundary.cc</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_error_handler.cc</div>
<div class="line">â”‚   â”œâ”€â”€ builder/                # Builder pattern tests</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_builder.cc</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_builder_coverage.cc</div>
<div class="line">â”‚   â”œâ”€â”€ config/                 # Configuration tests</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_config.cc</div>
<div class="line">â”‚   â””â”€â”€ CMakeLists.txt</div>
<div class="line">â”‚</div>
<div class="line">â”œâ”€â”€ integration/                # Integration tests</div>
<div class="line">â”‚   â”œâ”€â”€ tcp/                    # TCP communication tests</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_integration.cc</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_simple_server.cc</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_client_limit_integration.cc</div>
<div class="line">â”‚   â”œâ”€â”€ serial/                 # Serial communication tests</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_serial.cc</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_serial_builder_improvements.cc</div>
<div class="line">â”‚   â”œâ”€â”€ mock/                   # Mock-based tests</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_mock_integration.cc</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_mock_integrated.cc</div>
<div class="line">â”‚   â”œâ”€â”€ test_builder_integration.cc</div>
<div class="line">â”‚   â”œâ”€â”€ test_stable_integration.cc</div>
<div class="line">â”‚   â”œâ”€â”€ test_core_integrated.cc</div>
<div class="line">â”‚   â”œâ”€â”€ test_safety_integrated.cc</div>
<div class="line">â”‚   â””â”€â”€ CMakeLists.txt</div>
<div class="line">â”‚</div>
<div class="line">â”œâ”€â”€ e2e/                        # End-to-end tests</div>
<div class="line">â”‚   â”œâ”€â”€ scenarios/              # Real-world scenarios</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_architecture.cc</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_error_recovery.cc</div>
<div class="line">â”‚   â”œâ”€â”€ stress/                 # Stress tests</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_stress.cc</div>
<div class="line">â”‚   â””â”€â”€ CMakeLists.txt</div>
<div class="line">â”‚</div>
<div class="line">â”œâ”€â”€ performance/                # Performance tests</div>
<div class="line">â”‚   â”œâ”€â”€ benchmark/              # Benchmarks</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_performance.cc</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_benchmark.cc</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ test_transport_performance.cc</div>
<div class="line">â”‚   â”‚   â””â”€â”€ test_platform.cc</div>
<div class="line">â”‚   â””â”€â”€ CMakeLists.txt</div>
<div class="line">â”‚</div>
<div class="line">â”œâ”€â”€ fixtures/                   # Shared test resources</div>
<div class="line">â”‚   â”œâ”€â”€ mocks/                  # Mock objects</div>
<div class="line">â”‚   â””â”€â”€ data/                   # Test data</div>
<div class="line">â”‚</div>
<div class="line">â”œâ”€â”€ utils/                      # Test utilities</div>
<div class="line">â”‚   â””â”€â”€ test_utils.hpp</div>
<div class="line">â”‚</div>
<div class="line">â””â”€â”€ CMakeLists.txt              # Main test configuration</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md814"></a>
Running Tests</h1>
<h2><a class="anchor" id="autotoc_md815"></a>
Run All Tests</h2>
<div class="fragment"><div class="line">cd build</div>
<div class="line">ctest --output-on-failure</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md816"></a>
Run by Category</h2>
<div class="fragment"><div class="line"># Fast feedback (unit tests only)</div>
<div class="line">ctest -L unit</div>
<div class="line"> </div>
<div class="line"># Medium tests (integration)</div>
<div class="line">ctest -L integration</div>
<div class="line"> </div>
<div class="line"># Slow tests (E2E)</div>
<div class="line">ctest -L e2e</div>
<div class="line"> </div>
<div class="line"># Performance tests</div>
<div class="line">ctest -L performance</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md817"></a>
Run by Component</h2>
<div class="fragment"><div class="line"># All TCP-related tests</div>
<div class="line">ctest -L tcp</div>
<div class="line"> </div>
<div class="line"># All builder-related tests</div>
<div class="line">ctest -L builder</div>
<div class="line"> </div>
<div class="line"># All mock tests</div>
<div class="line">ctest -L mock</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md818"></a>
Run Specific Test Executable</h2>
<div class="fragment"><div class="line"># Run specific test file</div>
<div class="line">./test/unit/run_unit_test_builder --gtest_filter=&quot;BuilderTest.*&quot;</div>
<div class="line"> </div>
<div class="line"># List all tests</div>
<div class="line">./test/unit/run_unit_test_builder --gtest_list_tests</div>
<div class="line"> </div>
<div class="line"># Run with verbose output</div>
<div class="line">./test/unit/run_unit_test_builder --gtest_verbose</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md820"></a>
CI/CD Integration</h1>
<h2><a class="anchor" id="autotoc_md821"></a>
GitHub Actions Workflows</h2>
<p>The project uses a <b>staged testing approach</b> in CI:</p>
<h3><a class="anchor" id="autotoc_md822"></a>
1. &lt;strong&gt;Pull Request&lt;/strong&gt; (Fast feedback)</h3>
<ul>
<li>âœ… Unit Tests (~10s)</li>
<li>âœ… Integration Tests (~75s)</li>
<li>â­ï¸ E2E Tests (skipped for PRs)</li>
</ul>
<h3><a class="anchor" id="autotoc_md823"></a>
2. &lt;strong&gt;Main/Develop Branch&lt;/strong&gt; (Full validation)</h3>
<ul>
<li>âœ… Unit Tests</li>
<li>âœ… Integration Tests</li>
<li>âœ… E2E Tests (~64s)</li>
</ul>
<h3><a class="anchor" id="autotoc_md824"></a>
3. &lt;strong&gt;Nightly/On-Demand&lt;/strong&gt; (Performance)</h3>
<ul>
<li>âœ… Performance Tests (~10s)</li>
<li>ğŸ“Š Benchmark results archived</li>
</ul>
<h2><a class="anchor" id="autotoc_md825"></a>
Workflow Files</h2>
<ul>
<li><code>.github/workflows/test-organized.yml</code> - Organized test execution</li>
<li><code>.github/workflows/ci.yml</code> - Full CI/CD pipeline</li>
<li><code>.github/workflows/coverage.yml</code> - Code coverage analysis</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md827"></a>
Test Results Summary</h1>
<p>Latest test run results:</p>
<div class="fragment"><div class="line">Unit Tests:         91% pass rate (88/97)   ~10s</div>
<div class="line">Integration Tests:  83% pass rate (98/118)  ~75s</div>
<div class="line">E2E Tests:          91% pass rate (20/22)   ~64s</div>
<div class="line">Performance Tests:  100% pass rate (58/58)  ~10s</div>
<div class="line">----------------------------------------</div>
<div class="line">Total:              89% pass rate (264/295) ~160s</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md829"></a>
Benefits of Organized Structure</h1>
<h2><a class="anchor" id="autotoc_md830"></a>
1. &lt;strong&gt;Faster Feedback&lt;/strong&gt; âš¡</h2>
<ul>
<li>PR feedback in &lt;2 minutes (unit tests only)</li>
<li>Parallel test execution</li>
<li>Selective test running</li>
</ul>
<h2><a class="anchor" id="autotoc_md831"></a>
2. **Better Maintainability** ğŸ”§</h2>
<ul>
<li>Clear test organization</li>
<li>Easy to find specific tests</li>
<li>Logical grouping by functionality</li>
</ul>
<h2><a class="anchor" id="autotoc_md832"></a>
3. **Improved Developer Experience** ğŸ‘¨â€ğŸ’»</h2>
<div class="fragment"><div class="line"># Quick check during development</div>
<div class="line">ctest -L unit</div>
<div class="line"> </div>
<div class="line"># Full validation before commit</div>
<div class="line">ctest -L &quot;unit|integration&quot;</div>
<div class="line"> </div>
<div class="line"># Performance regression check</div>
<div class="line">ctest -L performance</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md833"></a>
4. **CI Optimization** ğŸš€</h2>
<ul>
<li>Unit tests on every PR</li>
<li>Integration tests on develop/main</li>
<li>E2E tests on main only</li>
<li>Performance tests nightly</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md835"></a>
Adding New Tests</h1>
<h2><a class="anchor" id="autotoc_md836"></a>
1. Choose the Right Category</h2>
<ul>
<li><b>Unit Test</b>: Testing a single class/function in isolation</li>
<li><b>Integration Test</b>: Testing interaction between components</li>
<li><b>E2E Test</b>: Testing complete user scenarios</li>
<li><b>Performance Test</b>: Benchmarking and profiling</li>
</ul>
<h2><a class="anchor" id="autotoc_md837"></a>
2. Add Test File</h2>
<div class="fragment"><div class="line"><span class="comment">// test/unit/common/test_my_feature.cc</span></div>
<div class="line"><span class="preprocessor">#include &lt;gtest/gtest.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;unilink/my_feature.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line">TEST(MyFeatureTest, BasicFunctionality) {</div>
<div class="line">  <span class="comment">// Your test here</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {</div>
<div class="line">  ::testing::InitGoogleTest(&amp;argc, argv);</div>
<div class="line">  <span class="keywordflow">return</span> RUN_ALL_TESTS();</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md838"></a>
3. Update CMakeLists.txt</h2>
<div class="fragment"><div class="line"># test/unit/CMakeLists.txt</div>
<div class="line">add_executable(run_unit_test_my_feature common/test_my_feature.cc)</div>
<div class="line">target_link_libraries(run_unit_test_my_feature</div>
<div class="line">  PRIVATE</div>
<div class="line">    unilink</div>
<div class="line">    GTest::gtest</div>
<div class="line">    GTest::gtest_main</div>
<div class="line">    GTest::gmock</div>
<div class="line">)</div>
<div class="line">gtest_discover_tests(run_unit_test_my_feature</div>
<div class="line">  PROPERTIES</div>
<div class="line">    LABELS &quot;unit;common;fast&quot;</div>
<div class="line">    TIMEOUT 30</div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md839"></a>
4. Build and Run</h2>
<div class="fragment"><div class="line">cd build</div>
<div class="line">cmake --build . --target run_unit_test_my_feature</div>
<div class="line">./test/unit/run_unit_test_my_feature</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md841"></a>
Test Best Practices</h1>
<h2><a class="anchor" id="autotoc_md842"></a>
Unit Tests</h2>
<ul>
<li>âœ… Fast (&lt; 1 second per test)</li>
<li>âœ… Isolated (no external dependencies)</li>
<li>âœ… Deterministic (same result every time)</li>
<li>âœ… Focus on single responsibility</li>
</ul>
<h2><a class="anchor" id="autotoc_md843"></a>
Integration Tests</h2>
<ul>
<li>âœ… Test component interactions</li>
<li>âœ… Use mocks when appropriate</li>
<li>âœ… Keep under 60 seconds</li>
<li>âœ… Test realistic scenarios</li>
</ul>
<h2><a class="anchor" id="autotoc_md844"></a>
E2E Tests</h2>
<ul>
<li>âœ… Test complete user workflows</li>
<li>âœ… Minimize test count (high value only)</li>
<li>âœ… Can be slower (up to 2 minutes)</li>
<li>âœ… Test critical paths</li>
</ul>
<h2><a class="anchor" id="autotoc_md845"></a>
Performance Tests</h2>
<ul>
<li>âœ… Measure performance metrics</li>
<li>âœ… Detect regressions</li>
<li>âœ… Archive results for comparison</li>
<li>âœ… Run in Release mode</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md847"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md848"></a>
Test Failures</h2>
<div class="fragment"><div class="line"># Run specific test with verbose output</div>
<div class="line">ctest -R &quot;test_name&quot; --verbose --output-on-failure</div>
<div class="line"> </div>
<div class="line"># Run test directly (more control)</div>
<div class="line">./test/unit/run_unit_test_builder --gtest_filter=&quot;BuilderTest.BasicFunctionality&quot;</div>
<div class="line"> </div>
<div class="line"># Run with debugging</div>
<div class="line">gdb ./test/unit/run_unit_test_builder</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md849"></a>
Build Issues</h2>
<div class="fragment"><div class="line"># Clean rebuild</div>
<div class="line">rm -rf build</div>
<div class="line">cmake -S . -B build -DUNILINK_BUILD_TESTS=ON</div>
<div class="line">cmake --build build</div>
<div class="line"> </div>
<div class="line"># Check test targets</div>
<div class="line">cmake --build build --target help | grep test</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md850"></a>
Timeout Issues</h2>
<p>If tests timeout in CI:</p><ol type="1">
<li>Check test timeout settings in CMakeLists.txt</li>
<li>Reduce test complexity</li>
<li>Use mocks instead of real I/O</li>
<li>Consider moving to E2E category</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md852"></a>
Future Improvements</h1>
<ul>
<li>[ ] Add code coverage per test category</li>
<li>[ ] Implement test sharding for parallel execution</li>
<li>[ ] Add test result trending and analytics</li>
<li>[ ] Create test templates for common patterns</li>
<li>[ ] Add mutation testing for test quality</li>
<li>[ ] Implement visual test reports</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md854"></a>
References</h1>
<ul>
<li><a href="https://google.github.io/googletest/">Google Test Documentation</a></li>
<li><a href="https://cmake.org/cmake/help/latest/manual/ctest.1.html">CTest Documentation</a></li>
<li>Test Coverage Guide</li>
<li>Test Refactoring Plan </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Jan 4 2026 18:49:17 for unilink by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
