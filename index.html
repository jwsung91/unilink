<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>unilink: Unilink System Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">unilink
   &#160;<span id="projectnumber">0.4.0</span>
   </div>
   <div id="projectbrief">A simple C++ library for unified async communication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Unilink System Architecture </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_docs_architecture_README"></a> Comprehensive overview of unilink's architecture and design principles.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md99"></a>
Table of Contents</h1>
<ol type="1">
<li><a href="#overview">Overview</a></li>
<li><a href="#layered-architecture">Layered Architecture</a></li>
<li><a href="#core-components">Core Components</a></li>
<li><a href="#design-patterns">Design Patterns</a></li>
<li><a href="#threading-model">Threading Model</a></li>
<li><a href="#memory-management">Memory Management</a></li>
<li><a href="#error-handling">Error Handling</a></li>
<li><a href="#development--tooling">Development &amp; Tooling</a></li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md101"></a>
Overview</h1>
<p>Unilink is designed as a layered, modular communication library with clear separation of concerns. The architecture follows SOLID principles and employs modern C++ design patterns.</p>
<h2><a class="anchor" id="autotoc_md102"></a>
Design Goals</h2>
<ul>
<li><b>Simplicity</b>: Easy-to-use Builder API</li>
<li><b>Safety</b>: Memory-safe, thread-safe operations</li>
<li><b>Performance</b>: Asynchronous I/O, efficient resource management</li>
<li><b>Flexibility</b>: Modular design, optional features</li>
<li><b>Reliability</b>: Comprehensive error handling and recovery</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md104"></a>
Layered Architecture</h1>
<div class="fragment"><div class="line">graph TD</div>
<div class="line">    User[User Application Layer]</div>
<div class="line">    Builder[Builder API Layer&lt;br/&gt;TcpClientBuilder, TcpServerBuilder, etc.]</div>
<div class="line">    Wrapper[Wrapper API Layer&lt;br/&gt;TcpClient, TcpServer, Serial]</div>
<div class="line">    Transport[Transport Layer&lt;br/&gt;TcpTransport, SerialTransport]</div>
<div class="line">    Common[Common Utilities Layer&lt;br/&gt;Thread Safety, Memory Management, Logging]</div>
<div class="line">    Platform[Platform Layer&lt;br/&gt;Boost.Asio]</div>
<div class="line"> </div>
<div class="line">    User --&gt; Builder</div>
<div class="line">    Builder --&gt; Wrapper</div>
<div class="line">    Wrapper --&gt; Transport</div>
<div class="line">    Transport --&gt; Common</div>
<div class="line">    Common --&gt; Platform</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md105"></a>
Layer Responsibilities</h2>
<h3><a class="anchor" id="autotoc_md106"></a>
1. Builder API Layer</h3>
<ul>
<li><b>Purpose</b>: Provide fluent, chainable interface</li>
<li><b>Components</b>: <code>TcpClientBuilder</code>, <code>TcpServerBuilder</code>, <code>SerialBuilder</code></li>
<li><b>Responsibilities</b>:<ul>
<li>Configuration validation</li>
<li>Object construction</li>
<li>Callback registration</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md107"></a>
2. Wrapper API Layer</h3>
<ul>
<li><b>Purpose</b>: High-level, easy-to-use interfaces</li>
<li><b>Components</b>: <code>TcpClient</code>, <code>TcpServer</code>, <code>Serial</code></li>
<li><b>Responsibilities</b>:<ul>
<li>Connection management</li>
<li>Data transmission</li>
<li>Lifecycle management</li>
<li>Event callbacks</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md108"></a>
3. Transport Layer</h3>
<ul>
<li><b>Purpose</b>: Low-level communication implementation</li>
<li><b>Components</b>: Protocol-specific transports</li>
<li><b>Responsibilities</b>:<ul>
<li>Actual I/O operations</li>
<li>Protocol handling</li>
<li>Connection state management</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md109"></a>
4. Common Utilities Layer</h3>
<ul>
<li><b>Purpose</b>: Shared functionality</li>
<li><b>Components</b>: Thread safety, memory management, logging</li>
<li><b>Responsibilities</b>:<ul>
<li>Thread-safe operations</li>
<li>Memory tracking</li>
<li>Error handling</li>
<li>Logging system</li>
</ul>
</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md111"></a>
Core Components</h1>
<h2><a class="anchor" id="autotoc_md112"></a>
1. Builder System</h2>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceunilink_1_1builder.html">unilink::builder</a> {</div>
<div class="line">    <span class="comment">// Base interface</span></div>
<div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">    <span class="keyword">class </span>BuilderInterface { ... };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Concrete builders</span></div>
<div class="line">    <span class="keyword">class </span>TcpClientBuilder : <span class="keyword">public</span> BuilderInterface&lt;wrapper::TcpClient&gt;;</div>
<div class="line">    class TcpServerBuilder : <span class="keyword">public</span> BuilderInterface&lt;wrapper::TcpServer&gt;;</div>
<div class="line">    class SerialBuilder : <span class="keyword">public</span> BuilderInterface&lt;wrapper::Serial&gt;;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceunilink_1_1builder_html"><div class="ttname"><a href="namespaceunilink_1_1builder.html">unilink::builder</a></div><div class="ttdef"><b>Definition:</b> <a href="auto__initializer_8cc_source.html#l00020">auto_initializer.cc:20</a></div></div>
</div><!-- fragment --><p><b>Key Features:</b></p>
<ul>
<li>Method chaining</li>
<li>Type-safe configuration</li>
<li>Compile-time validation</li>
<li>Auto-initialization support</li>
</ul>
<h2><a class="anchor" id="autotoc_md113"></a>
2. Wrapper System</h2>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceunilink_1_1wrapper.html">unilink::wrapper</a> {</div>
<div class="line">    <span class="comment">// Base interface</span></div>
<div class="line">    <span class="keyword">class </span>ChannelInterface {</div>
<div class="line">        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classunilink_1_1wrapper_1_1ChannelInterface.html#a5333262b7e85dc9c68ef2ec90f710906">send</a>(<span class="keyword">const</span> std::string&amp; data) = 0;</div>
<div class="line">        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classunilink_1_1wrapper_1_1ChannelInterface.html#ad5e16340e92a38cc6016e81c4325acfa">start</a>() = 0;</div>
<div class="line">        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classunilink_1_1wrapper_1_1ChannelInterface.html#ad8b698aa572dffa18e0e9df5d465c6d0">stop</a>() = 0;</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Implementations</span></div>
<div class="line">    <span class="keyword">class </span>TcpClient : <span class="keyword">public</span> ChannelInterface;</div>
<div class="line">    class TcpServer : <span class="keyword">public</span> ChannelInterface;</div>
<div class="line">    class Serial : <span class="keyword">public</span> ChannelInterface;</div>
<div class="line">}</div>
<div class="ttc" id="aclassunilink_1_1wrapper_1_1ChannelInterface_html_a5333262b7e85dc9c68ef2ec90f710906"><div class="ttname"><a href="classunilink_1_1wrapper_1_1ChannelInterface.html#a5333262b7e85dc9c68ef2ec90f710906">unilink::wrapper::ChannelInterface::send</a></div><div class="ttdeci">virtual void send(const std::string &amp;data)=0</div></div>
<div class="ttc" id="aclassunilink_1_1wrapper_1_1ChannelInterface_html_ad5e16340e92a38cc6016e81c4325acfa"><div class="ttname"><a href="classunilink_1_1wrapper_1_1ChannelInterface.html#ad5e16340e92a38cc6016e81c4325acfa">unilink::wrapper::ChannelInterface::start</a></div><div class="ttdeci">virtual void start()=0</div></div>
<div class="ttc" id="aclassunilink_1_1wrapper_1_1ChannelInterface_html_ad8b698aa572dffa18e0e9df5d465c6d0"><div class="ttname"><a href="classunilink_1_1wrapper_1_1ChannelInterface.html#ad8b698aa572dffa18e0e9df5d465c6d0">unilink::wrapper::ChannelInterface::stop</a></div><div class="ttdeci">virtual void stop()=0</div></div>
<div class="ttc" id="anamespaceunilink_1_1wrapper_html"><div class="ttname"><a href="namespaceunilink_1_1wrapper.html">unilink::wrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="unilink_8hpp_source.html#l00067">unilink.hpp:67</a></div></div>
</div><!-- fragment --><p><b>Key Features:</b></p>
<ul>
<li>Unified interface</li>
<li>Automatic resource management</li>
<li>Callback-based events</li>
<li>Thread-safe operations</li>
</ul>
<h2><a class="anchor" id="autotoc_md114"></a>
3. Transport System</h2>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceunilink_1_1transport.html">unilink::transport</a> {</div>
<div class="line">    <span class="comment">// TCP transport</span></div>
<div class="line">    <span class="keyword">class </span>TcpClient { ... };</div>
<div class="line">    <span class="keyword">class </span>TcpServer { ... };</div>
<div class="line">    <span class="keyword">class </span>TcpServerSession { ... };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Serial transport</span></div>
<div class="line">    <span class="keyword">class </span>Serial { ... };</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceunilink_1_1transport_html"><div class="ttname"><a href="namespaceunilink_1_1transport.html">unilink::transport</a></div><div class="ttdef"><b>Definition:</b> <a href="boost__serial__port_8hpp_source.html#l00023">boost_serial_port.hpp:23</a></div></div>
</div><!-- fragment --><p><b>Key Features:</b></p>
<ul>
<li>Boost.Asio based</li>
<li>Asynchronous I/O</li>
<li>Retry logic (3s default interval, first retry at 100ms)</li>
<li>Backpressure guard: callback at high watermark (default 1 MiB), hard cap triggers socket close + Error state</li>
<li>Connection pooling (planned)</li>
</ul>
<h2><a class="anchor" id="autotoc_md115"></a>
4. Common Utilities</h2>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceunilink_1_1common.html">unilink::common</a> {</div>
<div class="line">    <span class="comment">// Thread safety</span></div>
<div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">    <span class="keyword">class </span>ThreadSafeState;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line">    <span class="keyword">class </span>AtomicState;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Memory management</span></div>
<div class="line">    <span class="keyword">class </span>MemoryPool;</div>
<div class="line">    <span class="keyword">class </span>MemoryTracker;</div>
<div class="line">    <span class="keyword">class </span>SafeDataBuffer;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Logging</span></div>
<div class="line">    <span class="keyword">class </span>Logger;</div>
<div class="line">    <span class="keyword">class </span>LogRotation;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Error handling</span></div>
<div class="line">    <span class="keyword">class </span>ErrorHandler;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceunilink_1_1common_html"><div class="ttname"><a href="namespaceunilink_1_1common.html">unilink::common</a></div><div class="ttdef"><b>Definition:</b> <a href="common_8hpp_source.html#l00189">common.hpp:189</a></div></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md117"></a>
Design Patterns</h1>
<h2><a class="anchor" id="autotoc_md118"></a>
1. Builder Pattern</h2>
<p><b>Purpose</b>: Simplify object creation with many parameters</p>
<div class="fragment"><div class="line"><span class="comment">// Instead of this:</span></div>
<div class="line">TcpClient(host, port, retry_interval, callbacks...);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// We use this:</span></div>
<div class="line"><span class="keyword">auto</span> client = <a class="code" href="namespaceunilink.html#a6e965071daa5a68d914844bfbf79daac">tcp_client</a>(host, port)</div>
<div class="line">    .<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#a61c44f9311cd798efac3449fdd2034d5">retry_interval</a>(3000)  <span class="comment">// Optional, 3000ms is default</span></div>
<div class="line">    .<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#af0f78cdc2328bf0d06ef3789b3e4e41d">on_data</a>(callback)</div>
<div class="line">    .<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#a5a4af5b627ffc15c727cba9fa2fa1d93">build</a>();</div>
<div class="line"> </div>
<div class="line">client-&gt;start();  <span class="comment">// Explicit lifecycle control</span></div>
<div class="ttc" id="aclassunilink_1_1builder_1_1TcpClientBuilder_html_a5a4af5b627ffc15c727cba9fa2fa1d93"><div class="ttname"><a href="classunilink_1_1builder_1_1TcpClientBuilder.html#a5a4af5b627ffc15c727cba9fa2fa1d93">unilink::builder::TcpClientBuilder::build</a></div><div class="ttdeci">std::unique_ptr&lt; wrapper::TcpClient &gt; build() override</div><div class="ttdoc">Build and return the configured TcpClient.</div><div class="ttdef"><b>Definition:</b> <a href="tcp__client__builder_8cc_source.html#l00046">tcp_client_builder.cc:46</a></div></div>
<div class="ttc" id="aclassunilink_1_1builder_1_1TcpClientBuilder_html_a61c44f9311cd798efac3449fdd2034d5"><div class="ttname"><a href="classunilink_1_1builder_1_1TcpClientBuilder.html#a61c44f9311cd798efac3449fdd2034d5">unilink::builder::TcpClientBuilder::retry_interval</a></div><div class="ttdeci">TcpClientBuilder &amp; retry_interval(unsigned interval_ms)</div><div class="ttdoc">Set retry interval for automatic reconnection.</div><div class="ttdef"><b>Definition:</b> <a href="tcp__client__builder_8cc_source.html#l00155">tcp_client_builder.cc:155</a></div></div>
<div class="ttc" id="aclassunilink_1_1builder_1_1TcpClientBuilder_html_af0f78cdc2328bf0d06ef3789b3e4e41d"><div class="ttname"><a href="classunilink_1_1builder_1_1TcpClientBuilder.html#af0f78cdc2328bf0d06ef3789b3e4e41d">unilink::builder::TcpClientBuilder::on_data</a></div><div class="ttdeci">TcpClientBuilder &amp; on_data(std::function&lt; void(const std::string &amp;)&gt; handler) override</div><div class="ttdoc">Set data handler callback.</div><div class="ttdef"><b>Definition:</b> <a href="tcp__client__builder_8cc_source.html#l00130">tcp_client_builder.cc:130</a></div></div>
<div class="ttc" id="anamespaceunilink_html_a6e965071daa5a68d914844bfbf79daac"><div class="ttname"><a href="namespaceunilink.html#a6e965071daa5a68d914844bfbf79daac">unilink::tcp_client</a></div><div class="ttdeci">builder::TcpClientBuilder tcp_client(const std::string &amp;host, uint16_t port)</div><div class="ttdoc">Create a TCP client builder.</div><div class="ttdef"><b>Definition:</b> <a href="unilink_8hpp_source.html#l00095">unilink.hpp:95</a></div></div>
</div><!-- fragment --><p><b>Benefits:</b></p>
<ul>
<li>Readable configuration</li>
<li>Optional parameters</li>
<li>Compile-time validation</li>
<li>Method chaining</li>
</ul>
<h2><a class="anchor" id="autotoc_md119"></a>
2. Dependency Injection</h2>
<p><b>Purpose</b>: Enable testability and flexibility</p>
<div class="fragment"><div class="line"><span class="comment">// Interface-based design</span></div>
<div class="line"><span class="keyword">class </span>ISerialPort {</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> open() = 0;</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> close() = 0;</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> async_read(...) = 0;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Production implementation</span></div>
<div class="line"><span class="keyword">class </span>RealSerialPort : <span class="keyword">public</span> ISerialPort { ... };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Test implementation</span></div>
<div class="line"><span class="keyword">class </span>MockSerialPort : <span class="keyword">public</span> ISerialPort { ... };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Injection in constructor</span></div>
<div class="line">Serial::Serial(std::shared_ptr&lt;ISerialPort&gt; port) : port_(port) { }</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md120"></a>
3. Observer Pattern</h2>
<p><b>Purpose</b>: Event notification system</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>TcpClient {</div>
<div class="line">    std::function&lt;void()&gt; on_connect_;</div>
<div class="line">    std::function&lt;void(<span class="keyword">const</span> std::string&amp;)&gt; on_data_;</div>
<div class="line">    std::function&lt;void()&gt; on_disconnect_;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> notify_connect() {</div>
<div class="line">        <span class="keywordflow">if</span> (on_connect_) on_connect_();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> notify_data(<span class="keyword">const</span> std::string&amp; data) {</div>
<div class="line">        <span class="keywordflow">if</span> (on_data_) on_data_(data);</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md121"></a>
4. Singleton Pattern</h2>
<p><b>Purpose</b>: Global access to shared resources</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Logger {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">static</span> Logger&amp; instance() {</div>
<div class="line">        <span class="keyword">static</span> Logger instance;</div>
<div class="line">        <span class="keywordflow">return</span> instance;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    Logger() = <span class="keywordflow">default</span>;</div>
<div class="line">    Logger(<span class="keyword">const</span> Logger&amp;) = <span class="keyword">delete</span>;</div>
<div class="line">    Logger&amp; operator=(<span class="keyword">const</span> Logger&amp;) = <span class="keyword">delete</span>;</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md122"></a>
5. RAII (Resource Acquisition Is Initialization)</h2>
<p><b>Purpose</b>: Automatic resource management</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>TcpClient {</div>
<div class="line">    ~TcpClient() {</div>
<div class="line">        <span class="comment">// Automatically stop and clean up</span></div>
<div class="line">        stop();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::unique_ptr&lt;IoContext&gt; io_context_;  <span class="comment">// Auto-deleted</span></div>
<div class="line">    std::shared_ptr&lt;Connection&gt; connection_; <span class="comment">// Ref-counted</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md123"></a>
6. Template Method Pattern</h2>
<p><b>Purpose</b>: Define algorithm structure with customizable steps</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>ChannelInterface {</div>
<div class="line">    <span class="keywordtype">void</span> start() {</div>
<div class="line">        before_start();</div>
<div class="line">        do_start();      <span class="comment">// Virtual - customizable</span></div>
<div class="line">        after_start();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> do_start() = 0;</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> before_start() {}</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> after_start() {}</div>
<div class="line">};</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md125"></a>
Threading Model</h1>
<blockquote class="doxtable">
<p><b>Note:</b> For a detailed execution model, see <a class="el" href="md_docs_architecture_runtime_behavior.html">Runtime Behavior</a>. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md126"></a>
Overview</h2>
<div class="fragment"><div class="line">graph TD</div>
<div class="line">    User[User Thread Application&lt;br/&gt;- Calls API methods&lt;br/&gt;- Receives callbacks]</div>
<div class="line">    Queue[Thread-Safe Queue]</div>
<div class="line">    IO[I/O Thread Boost.Asio&lt;br/&gt;- Handles network I/O&lt;br/&gt;- Manages connections&lt;br/&gt;- Executes async operations]</div>
<div class="line"> </div>
<div class="line">    User --&gt; Queue</div>
<div class="line">    Queue --&gt; IO</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md127"></a>
Thread Safety Guarantees</h2>
<h3><a class="anchor" id="autotoc_md128"></a>
1. API Methods</h3>
<p>All public API methods are thread-safe:</p>
<div class="fragment"><div class="line"><span class="comment">// Safe to call from multiple threads</span></div>
<div class="line">client-&gt;send(<span class="stringliteral">&quot;data1&quot;</span>);  <span class="comment">// Thread 1</span></div>
<div class="line">client-&gt;send(<span class="stringliteral">&quot;data2&quot;</span>);  <span class="comment">// Thread 2</span></div>
<div class="line">client-&gt;stop();         <span class="comment">// Thread 3</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md129"></a>
2. Callbacks</h3>
<p>Callbacks are executed in the I/O thread context:</p>
<div class="fragment"><div class="line">.on_data([](<span class="keyword">const</span> std::string&amp; data) {</div>
<div class="line">    <span class="comment">// This runs in I/O thread</span></div>
<div class="line">    <span class="comment">// Don&#39;t block here!</span></div>
<div class="line">});</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md130"></a>
3. Shared State</h3>
<p>All shared state is protected:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>TcpClient {</div>
<div class="line">    ThreadSafeState&lt;State&gt; state_;  <span class="comment">// Thread-safe</span></div>
<div class="line">    std::atomic&lt;bool&gt; connected_;   <span class="comment">// Atomic</span></div>
<div class="line">    std::mutex write_mutex_;        <span class="comment">// Explicit lock</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md131"></a>
IO Context Management</h2>
<h3><a class="anchor" id="autotoc_md132"></a>
Shared Context (Default)</h3>
<div class="fragment"><div class="line"><span class="comment">// Multiple channels share one I/O thread</span></div>
<div class="line"><span class="keyword">auto</span> client1 = <a class="code" href="namespaceunilink.html#a6e965071daa5a68d914844bfbf79daac">tcp_client</a>(<span class="stringliteral">&quot;server1.com&quot;</span>, 8080).<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#a5a4af5b627ffc15c727cba9fa2fa1d93">build</a>();</div>
<div class="line"><span class="keyword">auto</span> client2 = <a class="code" href="namespaceunilink.html#a6e965071daa5a68d914844bfbf79daac">tcp_client</a>(<span class="stringliteral">&quot;server2.com&quot;</span>, 8080).<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#a5a4af5b627ffc15c727cba9fa2fa1d93">build</a>();</div>
<div class="line"><span class="comment">// Both use shared IoContextManager</span></div>
</div><!-- fragment --><p><b>Pros:</b></p>
<ul>
<li>Efficient resource usage</li>
<li>Single I/O thread handles all connections</li>
</ul>
<p><b>Cons:</b></p>
<ul>
<li>All connections share same thread</li>
</ul>
<h3><a class="anchor" id="autotoc_md133"></a>
Independent Context</h3>
<div class="fragment"><div class="line"><span class="comment">// Each channel has its own I/O thread</span></div>
<div class="line"><span class="keyword">auto</span> client = <a class="code" href="namespaceunilink.html#a6e965071daa5a68d914844bfbf79daac">tcp_client</a>(<span class="stringliteral">&quot;server.com&quot;</span>, 8080)</div>
<div class="line">    .<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#a567fa16a7c094edee54a0ea2fec74fcd">use_independent_context</a>(<span class="keyword">true</span>)</div>
<div class="line">    .<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#a5a4af5b627ffc15c727cba9fa2fa1d93">build</a>();</div>
<div class="ttc" id="aclassunilink_1_1builder_1_1TcpClientBuilder_html_a567fa16a7c094edee54a0ea2fec74fcd"><div class="ttname"><a href="classunilink_1_1builder_1_1TcpClientBuilder.html#a567fa16a7c094edee54a0ea2fec74fcd">unilink::builder::TcpClientBuilder::use_independent_context</a></div><div class="ttdeci">TcpClientBuilder &amp; use_independent_context(bool use_independent=true)</div><div class="ttdoc">Use independent IoContext for this client (for testing isolation)</div><div class="ttdef"><b>Definition:</b> <a href="tcp__client__builder_8cc_source.html#l00150">tcp_client_builder.cc:150</a></div></div>
</div><!-- fragment --><p><b>Pros:</b></p>
<ul>
<li>Isolation between connections</li>
<li>Useful for testing</li>
</ul>
<p><b>Cons:</b></p>
<ul>
<li>More resource usage</li>
<li>More threads</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md135"></a>
Memory Management</h1>
<h2><a class="anchor" id="autotoc_md136"></a>
1. Smart Pointers</h2>
<div class="fragment"><div class="line"><span class="comment">// Ownership</span></div>
<div class="line">std::unique_ptr&lt;TcpClient&gt; client_;  <span class="comment">// Exclusive ownership</span></div>
<div class="line">std::shared_ptr&lt;Session&gt; session_;   <span class="comment">// Shared ownership</span></div>
<div class="line">std::weak_ptr&lt;Connection&gt; conn_;     <span class="comment">// Non-owning reference</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md137"></a>
2. Memory Pool</h2>
<p>For high-performance scenarios, transports use a bucketed pool and an RAII buffer wrapper.</p>
<div class="fragment"><div class="line"><span class="comment">// Acquire/release with size buckets (1KB/4KB/16KB/64KB)</span></div>
<div class="line"><span class="keyword">auto</span> buf = GlobalMemoryPool::instance().acquire(4096);</div>
<div class="line"><span class="comment">// ... use buf.get() ...</span></div>
<div class="line">GlobalMemoryPool::instance().release(std::move(buf), 4096);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Preferred: RAII wrapper used by transports</span></div>
<div class="line">common::PooledBuffer pooled(common::MemoryPool::BufferSize::MEDIUM);</div>
<div class="line"><span class="keywordflow">if</span> (pooled.valid()) {</div>
<div class="line">    <a class="code" href="namespaceunilink_1_1base_1_1safe__memory.html#a4d7e2bd9069bd2febb47c18298fe5e0d">common::safe_memory::safe_memcpy</a>(pooled.data(), src, pooled.size());</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceunilink_1_1base_1_1safe__memory_html_a4d7e2bd9069bd2febb47c18298fe5e0d"><div class="ttname"><a href="namespaceunilink_1_1base_1_1safe__memory.html#a4d7e2bd9069bd2febb47c18298fe5e0d">unilink::base::safe_memory::safe_memcpy</a></div><div class="ttdeci">void safe_memcpy(uint8_t *dest, const uint8_t *src, size_t size)</div><div class="ttdoc">Safely copy memory with bounds checking.</div><div class="ttdef"><b>Definition:</b> <a href="common_8hpp_source.html#l00109">common.hpp:109</a></div></div>
</div><!-- fragment --><p><b>Notes:</b></p>
<ul>
<li>Pool applies to moderate sizes (&lt;=64KB); larger buffers fall back to regular allocations.</li>
<li>PooledBuffer enforces bounds in debug paths; <code>.data()</code> is validated before writes.</li>
</ul>
<h2><a class="anchor" id="autotoc_md138"></a>
3. Memory Tracking</h2>
<p>Debug memory leaks:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifdef UNILINK_ENABLE_MEMORY_TRACKING</span></div>
<div class="line"><span class="keyword">class </span>MemoryTracker {</div>
<div class="line">    <span class="keywordtype">void</span> track_allocation(<span class="keywordtype">void</span>* ptr, <span class="keywordtype">size_t</span> size);</div>
<div class="line">    <span class="keywordtype">void</span> track_deallocation(<span class="keywordtype">void</span>* ptr);</div>
<div class="line">    <span class="keywordtype">void</span> report_leaks();</div>
<div class="line">};</div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md139"></a>
4. Safe Data Buffer</h2>
<p>Bounds-checked buffer:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>SafeDataBuffer {</div>
<div class="line">    std::vector&lt;uint8_t&gt; data_;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">void</span> append(<span class="keyword">const</span> std::string&amp; str);  <span class="comment">// Bounds checked</span></div>
<div class="line">    <span class="keywordtype">void</span> append_bytes(<span class="keyword">const</span> std::vector&lt;uint8_t&gt;&amp; bytes);</div>
<div class="line"> </div>
<div class="line">    std::string to_string() <span class="keyword">const</span>;  <span class="comment">// Safe conversion</span></div>
<div class="line">};</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md141"></a>
Error Handling</h1>
<h2><a class="anchor" id="autotoc_md142"></a>
Error Propagation Flow</h2>
<div class="fragment"><div class="line">graph TD</div>
<div class="line">    Transport[Transport Layer Error&lt;br/&gt;Boost.Asio error_code]</div>
<div class="line">    Handler[Error Handler&lt;br/&gt;- Categorize&lt;br/&gt;- Log&lt;br/&gt;- Notify callbacks]</div>
<div class="line">    Callback[User Callback&lt;br/&gt;on_error]</div>
<div class="line">    Retry[Retry Logic&lt;br/&gt;if applicable]</div>
<div class="line"> </div>
<div class="line">    Transport --&gt; Handler</div>
<div class="line">    Handler --&gt; Callback</div>
<div class="line">    Handler --&gt; Retry</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md143"></a>
Error Categories</h2>
<div class="fragment"><div class="line"><span class="keyword">enum class</span> <a class="code" href="namespaceunilink_1_1diagnostics.html#aa5303c584c1adabc81d70a0498a263e7">ErrorCategory</a> {</div>
<div class="line">    NETWORK,        <span class="comment">// Connection, timeout, etc.</span></div>
<div class="line">    <a class="code" href="namespaceunilink_1_1diagnostics.html#aa5303c584c1adabc81d70a0498a263e7ad08e68ea80bc3bf47a03757579c11900">CONFIGURATION</a>,  <span class="comment">// Invalid config</span></div>
<div class="line">    <a class="code" href="namespaceunilink_1_1diagnostics.html#aa5303c584c1adabc81d70a0498a263e7afa177138f94a7ea01f549b1aa7893d03">SYSTEM</a>,         <span class="comment">// OS errors</span></div>
<div class="line">    <a class="code" href="namespaceunilink_1_1diagnostics.html#aa5303c584c1adabc81d70a0498a263e7a7014705458ee3cf0192f6aa52cfddea5">MEMORY</a>,         <span class="comment">// Allocation failures</span></div>
<div class="line">    VALIDATION      <span class="comment">// Input validation</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum class</span> <a class="code" href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7">ErrorLevel</a> {</div>
<div class="line">    <a class="code" href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7a551b723eafd6a31d444fcb2f5920fbd3">INFO</a>,           <span class="comment">// Informational</span></div>
<div class="line">    <a class="code" href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7a059e9861e0400dfbe05c98a841f3f96b">WARNING</a>,        <span class="comment">// Non-critical</span></div>
<div class="line">    <a class="code" href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>,          <span class="comment">// Serious error</span></div>
<div class="line">    <a class="code" href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7a99cd1c61610c76a57cb8d10d6df6b870">CRITICAL</a>        <span class="comment">// Fatal error</span></div>
<div class="line">};</div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_aa5303c584c1adabc81d70a0498a263e7"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#aa5303c584c1adabc81d70a0498a263e7">unilink::diagnostics::ErrorCategory</a></div><div class="ttdeci">ErrorCategory</div><div class="ttdoc">Error categories for classification.</div><div class="ttdef"><b>Definition:</b> <a href="error__types_8hpp_source.html#l00052">error_types.hpp:52</a></div></div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_aa5303c584c1adabc81d70a0498a263e7a7014705458ee3cf0192f6aa52cfddea5"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#aa5303c584c1adabc81d70a0498a263e7a7014705458ee3cf0192f6aa52cfddea5">unilink::diagnostics::ErrorCategory::MEMORY</a></div><div class="ttdeci">@ MEMORY</div></div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_aa5303c584c1adabc81d70a0498a263e7ad08e68ea80bc3bf47a03757579c11900"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#aa5303c584c1adabc81d70a0498a263e7ad08e68ea80bc3bf47a03757579c11900">unilink::diagnostics::ErrorCategory::CONFIGURATION</a></div><div class="ttdeci">@ CONFIGURATION</div></div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_aa5303c584c1adabc81d70a0498a263e7afa177138f94a7ea01f549b1aa7893d03"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#aa5303c584c1adabc81d70a0498a263e7afa177138f94a7ea01f549b1aa7893d03">unilink::diagnostics::ErrorCategory::SYSTEM</a></div><div class="ttdeci">@ SYSTEM</div></div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_ab22d3e2cb33951afa9b3ec53950e5cc7"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7">unilink::diagnostics::ErrorLevel</a></div><div class="ttdeci">ErrorLevel</div><div class="ttdoc">Error severity levels.</div><div class="ttdef"><b>Definition:</b> <a href="error__types_8hpp_source.html#l00042">error_types.hpp:42</a></div></div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_ab22d3e2cb33951afa9b3ec53950e5cc7a059e9861e0400dfbe05c98a841f3f96b"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7a059e9861e0400dfbe05c98a841f3f96b">unilink::diagnostics::ErrorLevel::WARNING</a></div><div class="ttdeci">@ WARNING</div></div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_ab22d3e2cb33951afa9b3ec53950e5cc7a551b723eafd6a31d444fcb2f5920fbd3"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7a551b723eafd6a31d444fcb2f5920fbd3">unilink::diagnostics::ErrorLevel::INFO</a></div><div class="ttdeci">@ INFO</div></div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_ab22d3e2cb33951afa9b3ec53950e5cc7a99cd1c61610c76a57cb8d10d6df6b870"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7a99cd1c61610c76a57cb8d10d6df6b870">unilink::diagnostics::ErrorLevel::CRITICAL</a></div><div class="ttdeci">@ CRITICAL</div></div>
<div class="ttc" id="anamespaceunilink_1_1diagnostics_html_ab22d3e2cb33951afa9b3ec53950e5cc7abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="namespaceunilink_1_1diagnostics.html#ab22d3e2cb33951afa9b3ec53950e5cc7abb1ca97ec761fc37101737ba0aa2e7c5">unilink::diagnostics::ErrorLevel::ERROR</a></div><div class="ttdeci">@ ERROR</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md144"></a>
Error Recovery Strategies</h2>
<h3><a class="anchor" id="autotoc_md145"></a>
1. Automatic Retry</h3>
<div class="fragment"><div class="line"><span class="keyword">class </span>RetryPolicy {</div>
<div class="line">    <span class="keywordtype">unsigned</span> max_attempts{5};</div>
<div class="line">    <span class="keywordtype">unsigned</span> interval_ms{3000};</div>
<div class="line">    <span class="keywordtype">bool</span> exponential_backoff{<span class="keyword">false</span>};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> should_retry(<span class="keywordtype">unsigned</span> attempt);</div>
<div class="line">    <span class="keywordtype">unsigned</span> get_delay(<span class="keywordtype">unsigned</span> attempt);</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md146"></a>
2. Circuit Breaker (Planned)</h3>
<div class="fragment"><div class="line"><span class="keyword">class </span>CircuitBreaker {</div>
<div class="line">    <span class="keyword">enum class</span> State { CLOSED, OPEN, HALF_OPEN };</div>
<div class="line"> </div>
<div class="line">    State state_{State::CLOSED};</div>
<div class="line">    <span class="keywordtype">unsigned</span> failure_threshold_{5};</div>
<div class="line">    std::chrono::seconds timeout_{30};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> allow_request();</div>
<div class="line">    <span class="keywordtype">void</span> record_success();</div>
<div class="line">    <span class="keywordtype">void</span> record_failure();</div>
<div class="line">};</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md148"></a>
Configuration System</h1>
<h2><a class="anchor" id="autotoc_md149"></a>
Compile-Time Configuration</h2>
<div class="fragment"><div class="line"><span class="comment">// CMake option: UNILINK_ENABLE_CONFIG</span></div>
<div class="line"><span class="preprocessor">#ifdef UNILINK_ENABLE_CONFIG</span></div>
<div class="line"><span class="keyword">namespace </span>config {</div>
<div class="line">    <span class="keyword">class </span>ConfigManager { ... };</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// CMake option: UNILINK_ENABLE_MEMORY_TRACKING</span></div>
<div class="line"><span class="preprocessor">#ifdef UNILINK_ENABLE_MEMORY_TRACKING</span></div>
<div class="line"><span class="keyword">class </span>MemoryTracker { ... };</div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md150"></a>
Runtime Configuration</h2>
<div class="fragment"><div class="line"><span class="keyword">struct </span>TcpClientConfig {</div>
<div class="line">    std::string host;</div>
<div class="line">    uint16_t port;</div>
<div class="line">    <span class="keywordtype">unsigned</span> retry_interval_ms{3000};  <span class="comment">// Default is 3 seconds</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load from file</span></div>
<div class="line"><span class="keyword">auto</span> config = ConfigManager::load_from_file(<span class="stringliteral">&quot;config.json&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> client_config = config-&gt;get_tcp_client_config(<span class="stringliteral">&quot;my_client&quot;</span>);</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md152"></a>
Performance Considerations</h1>
<h2><a class="anchor" id="autotoc_md153"></a>
1. Asynchronous I/O</h2>
<ul>
<li>Non-blocking operations</li>
<li>Efficient event loop (Boost.Asio)</li>
<li>Minimal context switching</li>
</ul>
<h2><a class="anchor" id="autotoc_md154"></a>
2. Zero-Copy Operations</h2>
<div class="fragment"><div class="line"><span class="comment">// Avoid unnecessary copies</span></div>
<div class="line"><span class="keywordtype">void</span> send(std::string&amp;&amp; data);  <span class="comment">// Move semantics</span></div>
<div class="line"><span class="keywordtype">void</span> send(std::string_view data);  <span class="comment">// View (no copy)</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md155"></a>
3. Connection Pooling (Planned)</h2>
<div class="fragment"><div class="line"><span class="comment">// Reuse connections</span></div>
<div class="line"><span class="keyword">class </span>ConnectionPool {</div>
<div class="line">    std::queue&lt;Connection*&gt; available_;</div>
<div class="line">    std::vector&lt;std::unique_ptr&lt;Connection&gt;&gt; all_;</div>
<div class="line"> </div>
<div class="line">    Connection* acquire();</div>
<div class="line">    <span class="keywordtype">void</span> release(Connection* conn);</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md156"></a>
4. Memory Pooling</h2>
<div class="fragment"><div class="line"><span class="comment">// Avoid repeated allocations</span></div>
<div class="line">MemoryPool buffer_pool_(1024, 100);</div>
<div class="line"><span class="keyword">auto</span> buffer = buffer_pool_.allocate();  <span class="comment">// Fast!</span></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md158"></a>
Extension Points</h1>
<h2><a class="anchor" id="autotoc_md159"></a>
1. Custom Transports</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyCustomTransport : <span class="keyword">public</span> transport::TransportInterface {</div>
<div class="line">    <span class="keywordtype">void</span> connect()<span class="keyword"> override </span>{ <span class="comment">/* ... */</span> }</div>
<div class="line">    <span class="keywordtype">void</span> send(<span class="keyword">const</span> std::string&amp; data)<span class="keyword"> override </span>{ <span class="comment">/* ... */</span> }</div>
<div class="line">    <span class="comment">// ... implement interface</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md160"></a>
2. Custom Builders</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyCustomBuilder : <span class="keyword">public</span> BuilderInterface&lt;MyWrapper&gt; {</div>
<div class="line">    std::unique_ptr&lt;MyWrapper&gt; build()<span class="keyword"> override </span>{</div>
<div class="line">        <span class="keywordflow">return</span> std::make_unique&lt;MyWrapper&gt;(<span class="comment">/* ... */</span>);</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md161"></a>
3. Custom Error Handlers</h2>
<div class="fragment"><div class="line">ErrorHandler::instance().register_callback([](<span class="keyword">const</span> ErrorInfo&amp; error) {</div>
<div class="line">    <span class="comment">// Custom error handling logic</span></div>
<div class="line">    send_to_monitoring_system(error);</div>
<div class="line">    <span class="keywordflow">if</span> (error.level == ErrorLevel::CRITICAL) {</div>
<div class="line">        trigger_alert();</div>
<div class="line">    }</div>
<div class="line">});</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md163"></a>
Development &amp; Tooling</h1>
<h2><a class="anchor" id="autotoc_md164"></a>
1. Docker-based Environment</h2>
<p>Unilink provides a Docker Compose-based environment to maintain a consistent development environment across various platforms.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Service   </th><th class="markdownTableHeadNone">Purpose   </th><th class="markdownTableHeadNone">Key Features    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>dev</code>   </td><td class="markdownTableBodyNone">Development   </td><td class="markdownTableBodyNone">Debug build, interactive shell provided    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>test</code>   </td><td class="markdownTableBodyNone">Testing   </td><td class="markdownTableBodyNone">Sanitizers (ASan/UBSan) and memory tracking enabled    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>perf</code>   </td><td class="markdownTableBodyNone">Performance   </td><td class="markdownTableBodyNone">Release build-based performance benchmarks    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>docs</code>   </td><td class="markdownTableBodyNone">Documentation   </td><td class="markdownTableBodyNone">Doxygen documentation generation and HTTP server (port 8000)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>prod</code>   </td><td class="markdownTableBodyNone">Production   </td><td class="markdownTableBodyNone">Optimized production image build   </td></tr>
</table>
<p><b>Usage Examples:</b></p>
<div class="fragment"><div class="line">docker-compose up test  # Run all tests and sanitizers</div>
<div class="line">docker-compose up docs  # Generate API docs and start server</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md165"></a>
2. Documentation Generation</h2>
<p>You can generate API documentation directly from the source code using Doxygen.</p>
<div class="fragment"><div class="line"># Direct generation via CMake</div>
<div class="line">make docs</div>
<div class="line"> </div>
<div class="line"># Generation via Docker</div>
<div class="line">docker-compose up docs</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md167"></a>
Testing Architecture</h1>
<h2><a class="anchor" id="autotoc_md168"></a>
1. Dependency Injection</h2>
<div class="fragment"><div class="line"><span class="comment">// Easy to mock</span></div>
<div class="line"><span class="keyword">class </span>Serial {</div>
<div class="line">    Serial(std::shared_ptr&lt;ISerialPort&gt; port) : port_(port) {}</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    std::shared_ptr&lt;ISerialPort&gt; port_;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// In tests</span></div>
<div class="line"><span class="keyword">auto</span> mock_port = std::make_shared&lt;MockSerialPort&gt;();</div>
<div class="line">Serial <a class="code" href="namespaceunilink.html#a9f2227aea1475c0655cf8cf4a99e55e9">serial</a>(mock_port);</div>
<div class="ttc" id="anamespaceunilink_html_a9f2227aea1475c0655cf8cf4a99e55e9"><div class="ttname"><a href="namespaceunilink.html#a9f2227aea1475c0655cf8cf4a99e55e9">unilink::serial</a></div><div class="ttdeci">builder::SerialBuilder serial(const std::string &amp;device, uint32_t baud_rate)</div><div class="ttdoc">Create a Serial port builder.</div><div class="ttdef"><b>Definition:</b> <a href="unilink_8hpp_source.html#l00105">unilink.hpp:105</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md169"></a>
2. Independent Contexts</h2>
<div class="fragment"><div class="line"><span class="comment">// Isolated testing</span></div>
<div class="line"><span class="keyword">auto</span> client = <a class="code" href="namespaceunilink.html#a6e965071daa5a68d914844bfbf79daac">tcp_client</a>(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 8080)</div>
<div class="line">    .<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#a567fa16a7c094edee54a0ea2fec74fcd">use_independent_context</a>(<span class="keyword">true</span>)  <span class="comment">// Own IO thread</span></div>
<div class="line">    .<a class="code" href="classunilink_1_1builder_1_1TcpClientBuilder.html#a5a4af5b627ffc15c727cba9fa2fa1d93">build</a>();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md170"></a>
3. State Verification</h2>
<div class="fragment"><div class="line"><span class="comment">// Check internal state</span></div>
<div class="line">ASSERT_EQ(client-&gt;get_state(), State::CONNECTED);</div>
<div class="line">ASSERT_TRUE(server-&gt;is_listening());</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md172"></a>
Summary</h1>
<p>Unilink's architecture emphasizes:</p>
<p> <b>Modularity</b> - Clear separation of concerns <br  />
  <b>Safety</b> - Memory-safe, thread-safe operations <br  />
  <b>Performance</b> - Asynchronous I/O, efficient resource management <br  />
  <b>Testability</b> - Dependency injection, mockable interfaces <br  />
  <b>Extensibility</b> - Easy to add new transports and features <br  />
  <b>Maintainability</b> - Clean code, well-documented</p>
<hr  />
<p><b>See Also:</b></p>
<ul>
<li>Design Patterns</li>
<li>Threading Model</li>
<li>../guides/performance_tuning.md "Performance Guide" </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Feb 17 2026 01:23:35 for unilink by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
